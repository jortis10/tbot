   1               		.file	"ip_i2c.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.section	.text.i2cReadRegisters,"ax",@progbits
  12               	.global	i2cReadRegisters
  14               	i2cReadRegisters:
  15               	.LFB136:
  16               		.file 1 "ip_i2c.c"
   1:ip_i2c.c      **** /**
   2:ip_i2c.c      ****  *
   3:ip_i2c.c      ****  * @file    i2c.c
   4:ip_i2c.c      ****  *
   5:ip_i2c.c      ****  * @brief   I2C driver
   6:ip_i2c.c      ****  *
   7:ip_i2c.c      ****  * @author  Theodore Ateba, tf.ateba@gmail.com
   8:ip_i2c.c      ****  *
   9:ip_i2c.c      ****  * @date    05 Jully 2016
  10:ip_i2c.c      ****  *
  11:ip_i2c.c      ****  * @update  24 August 2016
  12:ip_i2c.c      ****  *
  13:ip_i2c.c      ****  */
  14:ip_i2c.c      **** 
  15:ip_i2c.c      **** /*===========================================================================*/
  16:ip_i2c.c      **** /* Include Libraries                                                         */
  17:ip_i2c.c      **** /*===========================================================================*/
  18:ip_i2c.c      **** #include "ip_i2c.h"
  19:ip_i2c.c      **** 
  20:ip_i2c.c      **** /*===========================================================================*/
  21:ip_i2c.c      **** /* Driver Functions                                                          */ 
  22:ip_i2c.c      **** /*===========================================================================*/
  23:ip_i2c.c      **** 
  24:ip_i2c.c      **** /**
  25:ip_i2c.c      ****  * @fn    i2cReadRegisters
  26:ip_i2c.c      ****  * @brief Read a register or a block of registers from the sensor.
  27:ip_i2c.c      ****  *
  28:ip_i2c.c      ****  * @param[in] i2cp    Pointer to the i2c interface.
  29:ip_i2c.c      ****  * @param[in] addr    Slave address without R/W bit.
  30:ip_i2c.c      ****  * @param[in] reg     Pointer to the first register address to read.
  31:ip_i2c.c      ****  * @param[in] rxbuf   Pointer to the buffer to store the data readed.
  32:ip_i2c.c      ****  * @param[in] lenght  Size of data to read.
  33:ip_i2c.c      ****  * @retuen		msg			The result of the reading operation.
  34:ip_i2c.c      ****  */
  35:ip_i2c.c      **** msg_t i2cReadRegisters(I2CDriver *i2cp, uint8_t addr,
  36:ip_i2c.c      ****     uint8_t *reg, uint8_t *rxbuf, uint8_t lenght)
  37:ip_i2c.c      **** {
  17               		.loc 1 37 0
  18               		.cfi_startproc
  19               	.LVL0:
  20 0000 8F92      		push r8
  21               	.LCFI0:
  22               		.cfi_def_cfa_offset 4
  23               		.cfi_offset 8, -3
  24 0002 9F92      		push r9
  25               	.LCFI1:
  26               		.cfi_def_cfa_offset 5
  27               		.cfi_offset 9, -4
  28 0004 AF92      		push r10
  29               	.LCFI2:
  30               		.cfi_def_cfa_offset 6
  31               		.cfi_offset 10, -5
  32 0006 BF92      		push r11
  33               	.LCFI3:
  34               		.cfi_def_cfa_offset 7
  35               		.cfi_offset 11, -6
  36 0008 CF92      		push r12
  37               	.LCFI4:
  38               		.cfi_def_cfa_offset 8
  39               		.cfi_offset 12, -7
  40 000a DF92      		push r13
  41               	.LCFI5:
  42               		.cfi_def_cfa_offset 9
  43               		.cfi_offset 13, -8
  44 000c EF92      		push r14
  45               	.LCFI6:
  46               		.cfi_def_cfa_offset 10
  47               		.cfi_offset 14, -9
  48 000e FF92      		push r15
  49               	.LCFI7:
  50               		.cfi_def_cfa_offset 11
  51               		.cfi_offset 15, -10
  52 0010 0F93      		push r16
  53               	.LCFI8:
  54               		.cfi_def_cfa_offset 12
  55               		.cfi_offset 16, -11
  56 0012 1F93      		push r17
  57               	.LCFI9:
  58               		.cfi_def_cfa_offset 13
  59               		.cfi_offset 17, -12
  60 0014 CF93      		push r28
  61               	.LCFI10:
  62               		.cfi_def_cfa_offset 14
  63               		.cfi_offset 28, -13
  64 0016 DF93      		push r29
  65               	.LCFI11:
  66               		.cfi_def_cfa_offset 15
  67               		.cfi_offset 29, -14
  68 0018 00D0      		rcall .
  69               	.LCFI12:
  70               		.cfi_def_cfa_offset 18
  71 001a CDB7      		in r28,__SP_L__
  72 001c DEB7      		in r29,__SP_H__
  73               	.LCFI13:
  74               		.cfi_def_cfa_register 28
  75               	/* prologue: function */
  76               	/* frame size = 3 */
  77               	/* stack size = 15 */
  78               	.L__stack_usage = 15
  79 001e 4C01      		movw r8,r24
  80 0020 5901      		movw r10,r18
  38:ip_i2c.c      ****   msg_t msg;
  39:ip_i2c.c      **** 
  40:ip_i2c.c      ****   i2cAcquireBus(i2cp);
  81               		.loc 1 40 0
  82 0022 4A83      		std Y+2,r20
  83 0024 5B83      		std Y+3,r21
  84 0026 6983      		std Y+1,r22
  85 0028 0E94 0000 		call i2cAcquireBus
  86               	.LVL1:
  41:ip_i2c.c      ****   msg = i2cMasterTransmitTimeout(i2cp, addr, reg, 1, rxbuf, lenght, MS2ST(1));
  87               		.loc 1 41 0
  88 002c E02E      		mov r14,r16
  89 002e F12C      		mov r15,__zero_reg__
  90 0030 80E1      		ldi r24,lo8(16)
  91 0032 C82E      		mov r12,r24
  92 0034 D12C      		mov r13,__zero_reg__
  93 0036 8501      		movw r16,r10
  94               	.LVL2:
  95 0038 21E0      		ldi r18,lo8(1)
  96 003a 30E0      		ldi r19,0
  97 003c 4A81      		ldd r20,Y+2
  98 003e 5B81      		ldd r21,Y+3
  99 0040 6981      		ldd r22,Y+1
 100 0042 C401      		movw r24,r8
 101 0044 0E94 0000 		call i2cMasterTransmitTimeout
 102               	.LVL3:
 103 0048 5C01      		movw r10,r24
 104               	.LVL4:
  42:ip_i2c.c      ****   i2cReleaseBus(i2cp);
 105               		.loc 1 42 0
 106 004a C401      		movw r24,r8
 107 004c 0E94 0000 		call i2cReleaseBus
 108               	.LVL5:
  43:ip_i2c.c      **** 
  44:ip_i2c.c      ****   return msg;
  45:ip_i2c.c      **** }
 109               		.loc 1 45 0
 110 0050 C501      		movw r24,r10
 111               	/* epilogue start */
 112 0052 0F90      		pop __tmp_reg__
 113 0054 0F90      		pop __tmp_reg__
 114 0056 0F90      		pop __tmp_reg__
 115 0058 DF91      		pop r29
 116 005a CF91      		pop r28
 117 005c 1F91      		pop r17
 118 005e 0F91      		pop r16
 119               	.LVL6:
 120 0060 FF90      		pop r15
 121 0062 EF90      		pop r14
 122               	.LVL7:
 123 0064 DF90      		pop r13
 124 0066 CF90      		pop r12
 125 0068 BF90      		pop r11
 126 006a AF90      		pop r10
 127               	.LVL8:
 128 006c 9F90      		pop r9
 129 006e 8F90      		pop r8
 130               	.LVL9:
 131 0070 0895      		ret
 132               		.cfi_endproc
 133               	.LFE136:
 135               		.section	.text.i2cWriteRegisters,"ax",@progbits
 136               	.global	i2cWriteRegisters
 138               	i2cWriteRegisters:
 139               	.LFB137:
  46:ip_i2c.c      **** 
  47:ip_i2c.c      **** /**
  48:ip_i2c.c      ****  * @fn    i2cWriteRegisters
  49:ip_i2c.c      ****  * @brief Write to a register or a block of registers on the sensor.
  50:ip_i2c.c      ****  *
  51:ip_i2c.c      ****  * @param[in] i2cp    Pointer to the i2c interface.
  52:ip_i2c.c      ****  * @param[in] addr    Slave address without R/W bit.
  53:ip_i2c.c      ****  * @param[in] txbuf   Pointer to the data to write into the sensor.
  54:ip_i2c.c      ****  *                    txbuf[0] is the first register to write.
  55:ip_i2c.c      ****  * @param[in] lenght  Size of data to write to the sensor.
  56:ip_i2c.c      ****  * @return		msg     The result of the reading operation.
  57:ip_i2c.c      ****  */
  58:ip_i2c.c      **** msg_t i2cWriteRegisters(I2CDriver *i2cp, uint8_t addr,
  59:ip_i2c.c      ****     uint8_t *txbuf, uint8_t lenght)
  60:ip_i2c.c      **** {
 140               		.loc 1 60 0
 141               		.cfi_startproc
 142               	.LVL10:
 143 0000 AF92      		push r10
 144               	.LCFI14:
 145               		.cfi_def_cfa_offset 4
 146               		.cfi_offset 10, -3
 147 0002 BF92      		push r11
 148               	.LCFI15:
 149               		.cfi_def_cfa_offset 5
 150               		.cfi_offset 11, -4
 151 0004 CF92      		push r12
 152               	.LCFI16:
 153               		.cfi_def_cfa_offset 6
 154               		.cfi_offset 12, -5
 155 0006 DF92      		push r13
 156               	.LCFI17:
 157               		.cfi_def_cfa_offset 7
 158               		.cfi_offset 13, -6
 159 0008 EF92      		push r14
 160               	.LCFI18:
 161               		.cfi_def_cfa_offset 8
 162               		.cfi_offset 14, -7
 163 000a FF92      		push r15
 164               	.LCFI19:
 165               		.cfi_def_cfa_offset 9
 166               		.cfi_offset 15, -8
 167 000c 0F93      		push r16
 168               	.LCFI20:
 169               		.cfi_def_cfa_offset 10
 170               		.cfi_offset 16, -9
 171 000e 1F93      		push r17
 172               	.LCFI21:
 173               		.cfi_def_cfa_offset 11
 174               		.cfi_offset 17, -10
 175 0010 CF93      		push r28
 176               	.LCFI22:
 177               		.cfi_def_cfa_offset 12
 178               		.cfi_offset 28, -11
 179 0012 DF93      		push r29
 180               	.LCFI23:
 181               		.cfi_def_cfa_offset 13
 182               		.cfi_offset 29, -12
 183 0014 00D0      		rcall .
 184 0016 1F92      		push __zero_reg__
 185               	.LCFI24:
 186               		.cfi_def_cfa_offset 17
 187 0018 CDB7      		in r28,__SP_L__
 188 001a DEB7      		in r29,__SP_H__
 189               	.LCFI25:
 190               		.cfi_def_cfa_register 28
 191               	/* prologue: function */
 192               	/* frame size = 4 */
 193               	/* stack size = 14 */
 194               	.L__stack_usage = 14
 195 001c 5C01      		movw r10,r24
  61:ip_i2c.c      ****   msg_t msg;
  62:ip_i2c.c      **** 
  63:ip_i2c.c      ****   i2cAcquireBus(i2cp);
 196               		.loc 1 63 0
 197 001e 2C83      		std Y+4,r18
 198 0020 4A83      		std Y+2,r20
 199 0022 5B83      		std Y+3,r21
 200 0024 6983      		std Y+1,r22
 201 0026 0E94 0000 		call i2cAcquireBus
 202               	.LVL11:
  64:ip_i2c.c      ****   msg = i2cMasterTransmitTimeout(i2cp, addr, txbuf, lenght, NULL, 0, MS2ST(1));
 203               		.loc 1 64 0
 204 002a 2C81      		ldd r18,Y+4
 205 002c 30E0      		ldi r19,0
 206 002e 90E1      		ldi r25,lo8(16)
 207 0030 C92E      		mov r12,r25
 208 0032 D12C      		mov r13,__zero_reg__
 209 0034 E12C      		mov r14,__zero_reg__
 210 0036 F12C      		mov r15,__zero_reg__
 211 0038 00E0      		ldi r16,0
 212 003a 10E0      		ldi r17,0
 213 003c 4A81      		ldd r20,Y+2
 214 003e 5B81      		ldd r21,Y+3
 215 0040 6981      		ldd r22,Y+1
 216 0042 C501      		movw r24,r10
 217 0044 0E94 0000 		call i2cMasterTransmitTimeout
 218               	.LVL12:
 219 0048 8C01      		movw r16,r24
 220               	.LVL13:
  65:ip_i2c.c      ****   i2cReleaseBus(i2cp);
 221               		.loc 1 65 0
 222 004a C501      		movw r24,r10
 223 004c 0E94 0000 		call i2cReleaseBus
 224               	.LVL14:
  66:ip_i2c.c      **** 
  67:ip_i2c.c      ****   return msg;
  68:ip_i2c.c      **** }
 225               		.loc 1 68 0
 226 0050 C801      		movw r24,r16
 227               	/* epilogue start */
 228 0052 0F90      		pop __tmp_reg__
 229 0054 0F90      		pop __tmp_reg__
 230 0056 0F90      		pop __tmp_reg__
 231 0058 0F90      		pop __tmp_reg__
 232 005a DF91      		pop r29
 233 005c CF91      		pop r28
 234 005e 1F91      		pop r17
 235 0060 0F91      		pop r16
 236               	.LVL15:
 237 0062 FF90      		pop r15
 238 0064 EF90      		pop r14
 239 0066 DF90      		pop r13
 240 0068 CF90      		pop r12
 241 006a BF90      		pop r11
 242 006c AF90      		pop r10
 243               	.LVL16:
 244 006e 0895      		ret
 245               		.cfi_endproc
 246               	.LFE137:
 248               		.text
 249               	.Letext0:
 250               		.file 2 "/usr/lib/gcc/avr/4.8.2/include/stddef.h"
 251               		.file 3 "/usr/lib/avr/include/stdint.h"
 252               		.file 4 "../../ChibiOS_16.1.5/os/rt/ports/AVR/compilers/GCC/chtypes.h"
 253               		.file 5 "../../ChibiOS_16.1.5/os/rt/include/chsystypes.h"
 254               		.file 6 "../../ChibiOS_16.1.5/os/rt/include/chschd.h"
 255               		.file 7 "../../ChibiOS_16.1.5/os/rt/ports/AVR/chcore.h"
 256               		.file 8 "../../ChibiOS_16.1.5/os/rt/include/chsem.h"
 257               		.file 9 "../../ChibiOS_16.1.5/os/rt/include/chmtx.h"
 258               		.file 10 "../../ChibiOS_16.1.5/os/hal/include/i2c.h"
 259               		.file 11 "../../ChibiOS_16.1.5/os/hal/ports/AVR/i2c_lld.h"
DEFINED SYMBOLS
                            *ABS*:00000000 ip_i2c.c
     /tmp/ccgvTawh.s:2      *ABS*:0000003e __SP_H__
     /tmp/ccgvTawh.s:3      *ABS*:0000003d __SP_L__
     /tmp/ccgvTawh.s:4      *ABS*:0000003f __SREG__
     /tmp/ccgvTawh.s:5      *ABS*:0000003b __RAMPZ__
     /tmp/ccgvTawh.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccgvTawh.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccgvTawh.s:14     .text.i2cReadRegisters:00000000 i2cReadRegisters
     /tmp/ccgvTawh.s:138    .text.i2cWriteRegisters:00000000 i2cWriteRegisters

UNDEFINED SYMBOLS
i2cAcquireBus
i2cMasterTransmitTimeout
i2cReleaseBus
